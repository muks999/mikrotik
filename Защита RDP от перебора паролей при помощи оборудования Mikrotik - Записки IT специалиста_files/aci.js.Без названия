!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(self,(()=>(()=>{"use strict";var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,r=function(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,"string");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===e(r)?r:String(r)),i)}var r}(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.debug=!!e,this.available=this.isAvailable()}var e,o;return e=t,(o=[{key:"isAvailable",value:function(){return!0}},{key:"getStorage",value:function(){return null}},{key:"getIsDebug",value:function(){return this.debug}},{key:"getIsAvailable",value:function(){return this.available}}])&&n(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,u(o.key),o)}}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(y,t);var e,n,o,s,f=(o=y,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(o);if(s){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}(this,t)});function y(){var t,e,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=c(t=f.call.apply(f,[this].concat(r))),o=function(t){var e=null;try{e=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}catch(t){if(this.debug)throw t}return e},(n=u(n="getItem"))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,t}return e=y,n=[{key:"isAvailable",value:function(){return"string"==typeof document.cookie}},{key:"hasItem",value:function(t){var e=!1;try{e=new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-.+*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}catch(t){if(this.debug)throw t}return e}},{key:"setItem",value:function(t,e,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=!1;try{if(!t||/^(?:expires|max-age|path|domain|secure)$/i.test(t))return a;var c="";if(n)switch(n.constructor){case Number:c=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:c="; expires="+n;break;case Date:c="; expires="+n.toUTCString()}document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+c+(i?"; domain="+i:"")+(o?"; path="+o:"")+(r?"; secure":""),a=!0}catch(t){if(this.debug)throw t}return a}},{key:"removeItem",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=!1;try{if(!t||!this.hasItem(t))return!1;document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(e?"; path="+e:""),o=!0}catch(t){if(this.debug)throw t}return o}}],n&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),y}(o);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==f(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===f(i)?i:String(i)),o)}var i}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(a,t);var e,n,o,i,r=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=g(o);if(i){var n=g(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(n=[{key:"isAvailable",value:function(){var t=!1;try{var e=window.localStorage,n="__storage_test__";e.setItem(n,n),e.removeItem(n),t=!0}catch(t){if(this.debug)throw t}return t}},{key:"getStorage",value:function(){return window.localStorage}},{key:"hasItem",value:function(t){var e=!1;try{e=!(null===this.getStorage().getItem(t))}catch(t){if(this.debug)throw t}return e}},{key:"getItem",value:function(t){var e=null;try{e=this.getStorage().getItem(t)}catch(t){if(this.debug)throw t}return e}},{key:"setItem",value:function(t,e){var n=!1;try{this.getStorage().setItem(t,e),n=!0}catch(t){if(this.debug)throw t}return n}},{key:"removeItem",value:function(t){var e=!1;try{if(!t||!this.hasItem(t))return!1;this.getStorage().removeItem(t),e=!0}catch(t){if(this.debug)throw t}return e}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(o);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function b(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})).toLowerCase()}function v(t){return null===t?"":((t=t.replace(/\s+/gim," ").replace(/^\s+|\s+$/g,"")).length>1e3&&(t=t.substring(0,1e3)),t)}function m(t){return t<10?"0"+t:""+t}function w(){var t=(new Date).getTimezoneOffset();return(t>0?"-":"+")+m(Math.floor(Math.abs(t)/60))+":"+m(Math.abs(t)%60)}function k(t){var e=new Date;return e.getFullYear()+"-"+m(e.getMonth()+1)+"-"+m(e.getDate())+"T"+m(e.getHours())+":"+m(e.getMinutes())+":"+m(e.getSeconds())+"."+String((e.getMilliseconds()/1e3).toFixed(3)).slice(2,5)+(!0===t?w:"")}function O(t){return"object"===p(t)&&"[object Object]"===Object.prototype.toString.call(t)}function S(t){return void 0!==Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function _(t){return 0===Object.keys(t).length}function A(t){return"string"==typeof t||t instanceof String}function T(t){return null==t?"":(t=""+t,encodeURIComponent instanceof Function?encodeURIComponent(t):window.escape(t))}function C(t,e){var n=function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e+"="+t[e]);return n.join("&")}(e);return n.length>8e3&&(n=n.substring(0,8e3)),t+"?"+n}function P(t,e){var n=window.Image?new Image:document.createElement("img");n.src=t,e&&document.body.appendChild(n)}function x(t){var e=document.createElement("script");e&&(e.setAttribute("src",t),document.body.appendChild(e))}function j(t,e,n){Object.defineProperty(t,e,{value:n,writeable:!1,enumerable:!0,configurable:!1})}function E(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else{if(!t.attachEvent)throw"Cannot add event listener: no Event API support in client";t.attachEvent("on"+e,n)}}function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function D(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==I(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===I(i)?i:String(i)),o)}var i}var R=function(){function t(e,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.debug=!!i,this.consentBaseUrl=e,this.onSuccess=o,this.cookieName=n}var e,n;return e=t,(n=[{key:"accept",value:function(){P(this.consentBaseUrl+"?cd=opt-in",this.debug),this.saveConsent("opt-in"),this.onSuccess()}},{key:"decline",value:function(){P(this.consentBaseUrl+"?cd=opt-out",this.debug),this.saveConsent("opt-out")}},{key:"saveConsent",value:function(t){new s(this.debug).setItem(this.cookieName,t,1/0,"/")}},{key:"getConsent",value:function(){var t=new s(this.debug);return t.isAvailable()?t.getItem(this.cookieName):null}},{key:"showDialog",value:function(){var t=this.getConsent();if(null===t){var e=this,n=document.createElement("div");n.innerHTML='<style>.aci_consent.aci_consent_dialog{position:fixed;bottom:0;left:0;right:0;background-color:#fff;padding:1em;border-top-left-radius:1em;border-top-right-radius:1em;box-shadow:10px 10px 8px 10px #888}.aci_consent button{border-radius:2px;padding:.5rem 1rem;outline:0;background:#dcdae5;color:#111;cursor:pointer;border:none;transition:all ease .3s}</style> <div class="aci_consent aci_consent_dialog"> <div> <h1 class="aci_consent_dialog_headline">We use cookies</h1> <div> <p class="aci_consent_dialog_text"> We use cookies and other tracking technologies to improve your browsing experience on our website, to show you personalized content and targeted ads, to analyze our website traffic, and to understand where our visitors are coming from. <a href="https://traffic.sape.ru/policy_en.html">Read our privacy policy.</a> <br> </p> </div> <div> <button class="aci_consent_ok">Accept</button> <button class="aci_consent_decline">Decline</button> </div> </div> </div>',E(n.querySelector(".aci_consent_ok"),"click",(function(){n.style.display="none",e.accept()})),E(n.querySelector(".aci_consent_decline"),"click",(function(){n.style.display="none",e.decline()})),document.body.appendChild(n)}else"opt-in"===t&&this.onSuccess()}}])&&D(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function M(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==L(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==L(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===L(i)?i:String(i)),o)}var i}var N=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.debug=!!e}var e,n;return e=t,(n=[{key:"getUUID",value:function(t){var e=this.getStoredFp(t);return!1!==e&&""!==e&&null!==e||(e=b(),this.storeFp(t,e)),e}},{key:"getStoredFp",value:function(t){var e="",n=new h(this.debug),o=new s(this.debug);return n.isAvailable()&&n.hasItem(t)&&(e=n.getItem(t)),""!==e&&null!==e||!o.isAvailable()||(e=o.getItem(t)),e}},{key:"storeFp",value:function(t,e){var n=!1,o=!1,i=new h(this.debug),r=new s(this.debug);return i.isAvailable()&&(n=i.setItem(t,e)),r.isAvailable()&&(o=r.setItem(t,e,1/0,"/")),n||o}}])&&M(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}var F={};"object"==("undefined"==typeof JSON?"undefined":U(JSON))&&"function"==typeof JSON.stringify?F.stringify=function(t){return JSON.stringify(t)}:function(){var t,e,n,o,i;function r(e){return t.lastIndex=0,t.test(e)?'"'+e.replace(t,(function(t){var e=o[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function a(t,o){var c,l,u,s,f,y=e,d=o[t];d=function(t){function e(t){return t<10?"0"+t:t}if(t&&"object"==U(t)){if(t instanceof Date)return isFinite(t.valueOf())?t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"Z":null;if(t instanceof String||t instanceof Number||t instanceof Boolean)return t.valueOf()}return t}(d),"function"==typeof i&&(d=i.call(o,t,d));var g=U(d);switch("null"===g&&(g="object"),g){case"string":return r(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"object":if(!d)return"null";if(e+=n,f=[],"[object Array]"===Object.prototype.toString.apply(d)){for(s=d.length,c=0;c<s;c+=1)f[c]=a(c,d)||"null";return u=0===f.length?"[]":e?"[\n"+e+f.join(",\n"+e)+"\n"+y+"]":"["+f.join(",")+"]",e=y,u}if(i&&"object"===U(i))for(s=i.length,c=0;c<s;c+=1)"string"==typeof(l=i[c])&&(u=a(l,d))&&f.push(r(l)+(e?": ":":")+u);else for(l in d)Object.prototype.hasOwnProperty.call(d,l)&&(u=a(l,d))&&f.push(r(l)+(e?": ":":")+u);return u=0===f.length?"{}":e?"{\n"+e+f.join(",\n"+e)+"\n"+y+"}":"{"+f.join(",")+"}",e=y,u}}"function"!=typeof F.stringify&&(t=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},F.stringify=function(t,o,r){if(e="",n="","number"==typeof r)for(var c=0;c<r;c+=1)n+=" ";else"string"==typeof r&&(n=r);if(i=o,o&&"function"!=typeof o&&("object"!==U(o)||"number"!=typeof o.length))throw new Error("JSONStub.stringify");return a("",{"":t})})}();var H=F;function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function B(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==q(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===q(i)?i:String(i)),o)}var i}var J=function(){function t(e,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r="//www.acint.net";this.urlHit=r+"/hit/",this.urlAct=r+"/act/",this.urlJump=r+"/jump/",this.urlPing=r+"/ping/",this.urlMatchCookie=r+"/mc/",this.urlConsent=r+"/trimg/consent",this.urlGoogleAnalytics=r+"/gtag/",this.urlOci=r+"/oci/",this.appOci=r+"/oci.js",this.cookieName="aid",this.cookieValueOptOut="opt-out",this.cookieFid="fid",this.cookieOid="_ac_oid",this.cookieConsent="aci-consent",this.uid="",this.fid="",this.presence={timeouts:[3e3,2e4],nofRequests:0},this.dspTrack={timeout:50,maxNofRequests:4,nofRequests:0,ready:!1,bidRequestId:""},this.action={timeout:500,timeoutEmpty:2e3,countPerCycle:3,index:0,methods:{register:"register"},userCanReset:["timeout","timeoutEmpty","countPerCycle"]},this.googleAnalytics={state:0,data:{google_client_id:null,google_session_id:null}},this.config={dataProvider:"",publisherId:null,allowExtLinksTrack:!0,allowPresenceTrack:!0,allowCookieMatch:!0,allowDspTrack:!1,allowOciTrack:!0,customData:null,action:null,showConsentDialog:!1},this.global=e,this.aciConfig=n,this.aciAction=o,this.version="0.6.0",this.debug=!!i}var e,n;return e=t,n=[{key:"init",value:function(){if(!this.isAlreadyLoaded()){var t=new s(this.debug);if(!t.hasItem(this.cookieName)||this.cookieValueOptOut!==t.getItem(this.cookieName)){this.uid=b(),this.fid=new N(this.debug).getUUID(this.cookieFid),this.parseConfig();var e=this,n=function(){e.initHit(),!0===e.config.allowCookieMatch&&e.initCookieMatch(),!0===e.config.allowExtLinksTrack&&e.initExtLinksTrack(),!0===e.config.allowPresenceTrack&&e.initPresenceTrack(),!0===e.config.allowOciTrack&&e.initOciTrack(),void 0!==e.config.googleAnalytics&&e.config.googleAnalytics.gtagId&&e.config.googleAnalytics.uaProperty&&e.initGoogleAnalytics(e.config.googleAnalytics.gtagId,e.config.googleAnalytics.uaProperty),e.initActionCycle()};!0===this.config.showConsentDialog?e.initConsent(n):n()}}}},{key:"initHit",value:function(){P(C(this.urlHit,this.collectDataOnInit()),this.debug)}},{key:"initActionCycle",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e&&this.config.action){var n=this.config.action,o=this.action;if("string"==typeof n&&"{"===n[0])try{n=JSON.parse(n)}catch(t){n={}}for(var i=0;i<o.userCanReset.length;i++){var r=o.userCanReset[i];n.hasOwnProperty(r)&&(o[r]=n[r])}this.debug&&this.aciAction&&(this.aciAction.owner_id?console.log("acint: aci_action.owner_id is ["+this.aciAction.owner_id+"]"):console.warn("acint: aci_action.owner_id is not defined!"))}setTimeout((function(){return t.processActionData()}),e||0)}},{key:"processActionData",value:function(){var t=this.action;if(!this.aciAction&&this.global._aci_action&&(this.aciAction=this.global._aci_action),!this.aciAction||!S(this.aciAction))return this.debug&&console.log(k(!1)+": no _aci_action"),void(t.timeoutEmpty&&(this.initActionCycle(t.timeoutEmpty),t.timeoutEmpty=0));if(this.aciAction.length){for(var e=0;t.index<this.aciAction.length;){var n=this.aciAction[t.index];if(t.index++,S(n))if(n.length)for(var o=0;o<n.length;o++)this.processAction(n[o]),e++;else this.processAction(void 0),e++;else this.processAction(n),e++;if(e>=t.countPerCycle)break}this.debug&&e&&console.log(k(!1)+": processed "+e+" actions"),this.initActionCycle(t.timeout)}else this.initActionCycle(t.timeout)}},{key:"processAction",value:function(t){var e=this.action;switch(q(t)){case"function":t="#function";break;case"undefined":t="#undefined"}var n={owner_id:this.aciAction.owner_id?this.aciAction.owner_id:null,action:t},o=this.collectDataOnAction();o.ad=T(v(H.stringify(n))),null!==this.config.customData&&(o.cd=T(v(this.config.customData))),P(C(this.urlAct+e.methods.register,o),this.debug)}},{key:"initCookieMatch",value:function(){var t,e;t=C(this.urlMatchCookie,this.collectDataOnCookieMatch()),(e=document.createElement("iframe"))&&(e.setAttribute("src",t),e.setAttribute("style","width:1px;height:1px;display:none;"),e.setAttribute("frameBorder","0"),e.setAttribute("width","0"),e.setAttribute("height","0"),document.body.appendChild(e))}},{key:"initExtLinksTrack",value:function(){var t=this,e=document,n=function(e){var n,o,i=window,r=!1,a=(e=e||i.event).target||e.srcElement,c=a;if(!("tagName"in a)||"a"!==a.tagName.toLowerCase()){for(o=a.parentNode;o;){if("tagName"in o&&"a"===o.tagName.toLowerCase()){n=o;break}if(!("parentNode"in o))break;o=o.parentNode}if(!n)return;a=n}"href"in a&&/^(http:|https:|)\/\/.+/.test(a.href)&&("hostname"in a&&a.hostname===i.location.hostname||((e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)&&(r=!0),r=!0,a.hasOwnProperty("_delayClick")?!1===a.hasOwnProperty("_canSkipDelay")?"preventDefault"in e?e.preventDefault():e.returnValue=!1:(delete a._canSkipDelay,delete a._delayClick):(P(C(t.urlJump,t.collectDataOnClick(e,a)),t.debug),!1===r&&(a._delayClick=!0,setTimeout((function(){a._canSkipDelay=!0,function(t,e,n){var o,i=document;if(i.createEvent)try{o=new n.constructor(e,n),t.dispatchEvent(o)}catch(e){(o=i.createEvent("MouseEvent")).initMouseEvent(n.type,!0,!0,window,0,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget||null),t.dispatchEvent(o)}else i.createEventObject?((o=i.createEventObject(n)).eventType=e,t.fireEvent("on"+e,o)):"function"==typeof t["on"+e]&&t["on"+e]()}(c,"click",e)}),200),"preventDefault"in e?e.preventDefault():e.returnValue=!1))))};"interactive"===e.readyState||"complete"===e.readyState?E(e.body,"click",n):function(t){var e=!1,n=window,o=document,i=o.documentElement;function r(){e||(e=!0,t())}if(o.addEventListener)o.addEventListener("DOMContentLoaded",r,!1);else if(o.attachEvent){var a=!1;try{a=null!=n.frameElement}catch(t){}i.doScroll&&!a&&function t(){if(!e)try{i.doScroll("left"),r()}catch(e){setTimeout(t,10)}}(),o.attachEvent("onreadystatechange",(function(){"complete"===o.readyState&&r()}))}else if(n.addEventListener)n.addEventListener("load",r,!1);else if(n.attachEvent)n.attachEvent("onload",r);else{var c=n.onload;n.onload=function(){c&&c(),r()}}}((function(){E(e.body,"click",n)}))}},{key:"initPresenceTrack",value:function(){var t=this;setTimeout((function e(){if(P(C(t.urlPing,t.collectDataOnPresencePing()),t.debug),t.presence.nofRequests+=1,t.presence.nofRequests<t.presence.timeouts.length){var n=t.presence.timeouts[t.presence.nofRequests];setTimeout(e,n)}}),this.presence.timeouts[0])}},{key:"initOciTrack",value:function(){var t=this,e=null,n=null,o=new h(t.debug),i=new s(t.debug),r=function(e){var n=e+":"+(Date.now()+36e5);o&&o.setItem(t.cookieOid,n),i&&i.setItem(t.cookieOid,n,1/0,"/")};if(o.isAvailable()||(o=null),i.isAvailable()||(i=null),o&&o.hasItem(t.cookieOid)&&(e=o.getItem(t.cookieOid)),null===e&&i&&(e=i.getItem(t.cookieOid)),null!==e){var a=e.split(":");Date.now()>=parseInt(a[1])&&(r(a[0]),n=a[0],e=null)}null===e&&(x(t.appOci+"?t="+Date.now()),this.global._aci_ocic=this.global._aci_ocic||[],this.global._aci_ocic.push((function(e){e&&e.visitorId&&(n&&n!==e.visitorId&&P(C(t.urlOci,t.collectDataOnOci(n)),t.debug),P(C(t.urlOci,t.collectDataOnOci(e.visitorId)),t.debug),r(e.visitorId))})))}},{key:"initGoogleAnalytics",value:function(t,e){var n=this,o=function(){n.global.dataLayer.push(arguments)},i=function(){0===n.googleAnalytics.state&&null!==n.googleAnalytics.data.google_client_id&&null!==n.googleAnalytics.data.google_session_id&&(P(C(n.urlGoogleAnalytics,n.collectDataOnGoogleAnalytics()),n.debug),o("set","user_properties",{google_client_id:n.googleAnalytics.data.google_client_id+".",google_session_id:n.googleAnalytics.data.google_session_id+"."}),o("event","match",n.googleAnalytics.data),n.googleAnalytics.state=1)};x("https://www.googletagmanager.com/gtag/js?id="+t),this.global.dataLayer=this.global.dataLayer||[],o("js",new Date),o("config",e,{custom_map:{dimension1:"google_client_id",dimension2:"google_session_id"}}),o("get",e,"client_id",(function(t){n.googleAnalytics.data.google_client_id=t||"",i()})),o("get",e,"session_id",(function(t){n.googleAnalytics.data.google_session_id=t||"",i()}))}},{key:"initConsent",value:function(t){new R(this.urlConsent,this.cookieConsent,t,this.debug).showDialog()}},{key:"isAlreadyLoaded",value:function(){var t="_acil",e="isLoaded";return"object"===q(this.global[t])&&"function"==typeof this.global[t][e]||(void 0!==Object.defineProperty?(j(this.global,t,{}),j(this.global[t],e,(function(){return!0}))):(this.global[t]={},this.global[t][e]=function(){return!0}),!1)}},{key:"parseConfig",value:function(){if(O(this.aciConfig)&&!_(this.aciConfig)){for(var t=["dataProvider","publisherId"],e=["allowExtLinksTrack","allowPresenceTrack","allowCookieMatch","allowDspTrack","allowOciTrack","showConsentDialog"],n=["customData"],o=["action","googleAnalytics"],i=0;i<t.length;i++){var r=t[i];this.aciConfig.hasOwnProperty(r)&&(this.config[r]=isNaN(parseInt(this.aciConfig[r],10))?this.config[r]:Math.abs(parseInt(this.aciConfig[r],10)))}for(var a=0;a<e.length;a++){var c=e[a];this.aciConfig.hasOwnProperty(c)&&(this.config[c]=!0===this.aciConfig[c])}for(var l=0;l<n.length;l++){var u=n[l];if(this.aciConfig.hasOwnProperty(u)){var s=this.aciConfig[u];if(!(null==s||"function"==typeof s||A(s)&&0===s.length||O(s)&&_(s)||S(s)&&0===s.length)){try{O(s)||S(s)?"{}"!==(s=H.stringify(s))&&"[]"!==s||(s=null):A(s)||0===(s=s.toString()).length&&(s=null)}catch(t){if(s=null,this.debug)throw t}this.config[u]=s}}}for(var f=0;f<o.length;f++){var y=o[f];this.aciConfig.hasOwnProperty(y)&&(this.config[y]=this.aciConfig[y])}}}},{key:"dataAddObligatoryParams",value:function(t){return t.v=this.version,t.uid=this.uid,t.dp=this.config.dataProvider,t.tz=T(w()),t.nc=Math.random().toString().substring(2,8),!0===this.config.allowDspTrack&&(t.brid=T(v(this.dspTrack.bidRequestId))),t}},{key:"collectDataOnInit",value:function(){var t=document,e=window,n=this.dataAddObligatoryParams({});return n.u=T(v(e.location.href)),n.r=T(v(t.referrer||"")),n.rs=e.screen.width+"x"+e.screen.height,n.t=T(v(t.title)),n.oE=+this.config.allowExtLinksTrack,n.oP=+this.config.allowPresenceTrack,n.dT=T(k(!1)),n.fu=this.fid,null!==this.config.customData&&(n.cd=T(v(this.config.customData))),e.parent!==e&&(n.if=T(e.location.href),n.u=T(t.referrer||""),n.r=""),n}},{key:"collectDataOnCookieMatch",value:function(){var t={dp:this.config.dataProvider};return null!==this.config.publisherId&&(t.pi=this.config.publisherId),t}},{key:"collectDataOnClick",value:function(t,e){var n=document,o=window,i=t.target.ownerDocument||n,r=i.documentElement,a=i.body,c=this.dataAddObligatoryParams({});c.u="",c.r="",c.vP="",c.c="",c.aT="",c.hT=0,c.vP=(o.innerWidth||r.clientWidth||a.clientWidth)+"x"+(o.innerHeight||r.clientHeight||a.clientHeight),null==t.pageX&&null!=t.clientX?c.c=t.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0)+"x"+(t.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)):null!==t.pageX&&(c.c=t.pageX+"x"+t.pageY),c.r=T(v(o.location.href)),c.u=T(v(e.href));var l=e.childNodes,u=0;if(l.length>=1){for(var s=0,f=0,y=0;y<l.length;y++){var d=l[y];3!==d.nodeType&&1!==d.nodeType||1===d.nodeType&&(f+=1,"tagName"in l[y]&&"img"===l[y].tagName.toLowerCase()&&(s+=1,u=y))}1===s&&s===f?c.hT=1:f>0&&(c.hT=2)}switch(c.hT){case 1:c.aT=l[u].getAttribute("alt")||"";break;case 2:case 0:c.aT=e.innerHTML?e.innerHTML.toString().replace(/<\/?[^>]+>/gim,""):""}return c.aT.length>0&&(c.aT=v(c.aT),""!==c.aT&&(c.aT=/^(\S+(\s|)){1,10}/gim.exec(c.aT)[0].replace(/^\s+|\s+$/g,""))),c.aT=T(c.aT),c}},{key:"collectDataOnPresencePing",value:function(){var t=this.dataAddObligatoryParams({});return t.dT=T(k(!1)),t}},{key:"collectDataOnOci",value:function(t){var e=this.dataAddObligatoryParams({});return e.oid=t,e}},{key:"collectDataOnGoogleAnalytics",value:function(){var t=this.dataAddObligatoryParams({});return t.gC=this.googleAnalytics.data.google_client_id,t.gS=this.googleAnalytics.data.google_session_id,t}},{key:"collectDataOnAction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t=this.dataAddObligatoryParams(t)).dT=T(k(!1)),t}}],n&&B(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),G=window._aci_debug||!1;try{new J(window,window._acic||{},window._aci_action||null,G).init()}catch(t){if(G)throw t}return t})()));